<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<!--
    Add/Edit Venue Screen - HoopHub
    Form for creating a new venue or editing an existing one
-->

<StackPane prefHeight="720" prefWidth="1280"
           stylesheets="@../css/tokens.css, @../css/components.css, @../css/pages/login.css"
           xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="it.uniroma2.hoophub.graphic_controller.gui.AddEditVenueGraphicController">

    <!-- Background Image -->
    <ImageView fitHeight="720" fitWidth="1280" pickOnBounds="true" preserveRatio="false">
        <Image backgroundLoading="true" url="@../images/sfondo_con_titolo.png"/>
    </ImageView>

    <!-- Main Content Container -->
    <VBox alignment="TOP_CENTER" spacing="0">

        <!-- Top Bar with Back Button only -->
        <HBox alignment="CENTER_LEFT">
            <padding>
                <Insets top="24" left="32" right="32" bottom="0"/>
            </padding>

            <!-- Back Button -->
            <Button onAction="#onBackClick" styleClass="btn-back" text="â†"/>
        </HBox>

        <!-- Spacer to push content below HoopHub logo -->
        <!-- Regola questo valore per posizionare la card sotto il logo -->
        <Region prefHeight="235"/>

        <!-- Message Label (acts as page title) -->
        <Label fx:id="msgLabel" maxWidth="600" styleClass="message-label" textAlignment="CENTER" wrapText="true">
            <VBox.margin>
                <!-- top = spazio sopra, bottom = spazio sotto -->
                <Insets top="130" bottom="20"/>
            </VBox.margin>
        </Label>

        <!-- Form Card in ScrollPane -->
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                    styleClass="venues-scroll-pane" VBox.vgrow="ALWAYS">
            <VBox.margin>
                <Insets left="32" right="32" bottom="32"/>
            </VBox.margin>

            <HBox alignment="TOP_CENTER">
                <VBox maxWidth="520" minWidth="520" spacing="0">

                    <VBox alignment="CENTER" spacing="16" styleClass="card">
                        <padding>
                            <Insets top="28" left="36" right="36" bottom="28"/>
                        </padding>

                        <!-- Form Fields -->
                        <VBox spacing="14" VBox.vgrow="NEVER">

                            <!-- Venue Name -->
                            <VBox spacing="4">
                                <Label styleClass="field-label" text="Venue Name"/>
                                <TextField fx:id="nameField" maxWidth="440" minHeight="44"
                                           promptText="Enter venue name" styleClass="text-field"/>
                            </VBox>

                            <!-- Venue Type -->
                            <VBox spacing="4">
                                <Label styleClass="field-label" text="Venue Type"/>
                                <ComboBox fx:id="typeComboBox" maxWidth="440" minWidth="440" minHeight="44"
                                          promptText="Select venue type" styleClass="combo-box"/>
                            </VBox>

                            <!-- Address -->
                            <VBox spacing="4">
                                <Label styleClass="field-label" text="Address"/>
                                <TextField fx:id="addressField" maxWidth="440" minHeight="44"
                                           promptText="Enter street address" styleClass="text-field"/>
                            </VBox>

                            <!-- City -->
                            <VBox spacing="4">
                                <Label styleClass="field-label" text="City"/>
                                <TextField fx:id="cityField" maxWidth="440" minHeight="44"
                                           promptText="Enter city" styleClass="text-field"/>
                            </VBox>

                            <!-- Max Capacity -->
                            <VBox spacing="4">
                                <HBox alignment="CENTER_LEFT" spacing="8">
                                    <Label styleClass="field-label" text="Max Capacity"/>
                                    <Label fx:id="capacityHintLabel" styleClass="muted" text=""/>
                                </HBox>
                                <Spinner fx:id="capacitySpinner" maxWidth="440" minWidth="440" minHeight="44"
                                         editable="true" styleClass="spinner"/>
                            </VBox>

                            <!-- Associated Teams -->
                            <VBox spacing="4">
                                <HBox alignment="CENTER_LEFT" spacing="8">
                                    <Label styleClass="field-label" text="Associated Teams"/>
                                    <Label fx:id="teamsCountLabel" styleClass="muted" text="(0 selected)"/>
                                </HBox>

                                <!-- Search Field for Teams -->
                                <TextField fx:id="teamSearchField" maxWidth="440" minHeight="40"
                                           promptText="Search teams..." styleClass="text-field"/>

                                <!-- Teams ListView -->
                                <ListView fx:id="teamsListView" maxWidth="440" minWidth="440"
                                          prefHeight="150" styleClass="teams-list"/>
                            </VBox>

                        </VBox>

                        <!-- Action Buttons -->
                        <HBox alignment="CENTER" spacing="16">
                            <VBox.margin>
                                <Insets top="8"/>
                            </VBox.margin>

                            <!-- Cancel Button -->
                            <Button onAction="#onCancelClick" styleClass="btn-secondary"
                                    text="Cancel" minWidth="120" minHeight="44"/>

                            <!-- Save Button -->
                            <Button fx:id="saveButton" onAction="#onSaveClick" styleClass="btn-primary"
                                    text="Save Venue" minWidth="160" minHeight="44"/>
                        </HBox>

                    </VBox>
                </VBox>
            </HBox>
        </ScrollPane>

    </VBox>

</StackPane>